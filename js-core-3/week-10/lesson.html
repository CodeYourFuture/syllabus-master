
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Week 10 - Good Code, TDD Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-tomorrow.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../week-11/lesson.html" />
    
    
    <link rel="prev" href="../" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Overview
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../others/lesson0.html">
            
                <a href="../../others/lesson0.html">
            
                    
                    Week 0
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../html-css/">
            
                <a href="../../html-css/">
            
                    
                    HTML/CSS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../html-css/week-01/lesson.html">
            
                <a href="../../html-css/week-01/lesson.html">
            
                    
                    Week 1 - Semantic HTML and CSS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../../html-css/week-02/lesson.html">
            
                <a href="../../html-css/week-02/lesson.html">
            
                    
                    Week 2 - Responsive Web and layout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../../html-css/week-03/lesson.html">
            
                <a href="../../html-css/week-03/lesson.html">
            
                    
                    Week 3 - Design frameworks, Naming patterns and Forms
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../../html-css/compile-scss-instructions.html">
            
                <a href="../../html-css/compile-scss-instructions.html">
            
                    
                    Compiling SCSS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../js-core/">
            
                <a href="../../js-core/">
            
                    
                    JavaScript I
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../js-core/week-04/lesson.html">
            
                <a href="../../js-core/week-04/lesson.html">
            
                    
                    Week 4 - Hello JavaScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../../js-core/week-05/lesson.html">
            
                <a href="../../js-core/week-05/lesson.html">
            
                    
                    Week 5 - Arrays and Objects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../../js-core/week-06/lesson.html">
            
                <a href="../../js-core/week-06/lesson.html">
            
                    
                    Week 6 - Debugging and more Data Structures
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../../js-core-2/">
            
                <a href="../../js-core-2/">
            
                    
                    JavaScript II
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../../js-core-2/week-07/lesson.html">
            
                <a href="../../js-core-2/week-07/lesson.html">
            
                    
                    Week 7 - In-depth Functions and Intro to DOM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../../js-core-2/week-08/lesson.html">
            
                <a href="../../js-core-2/week-08/lesson.html">
            
                    
                    Week 8 - DOM, Events
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../../js-core-2/week-09/lesson.html">
            
                <a href="../../js-core-2/week-09/lesson.html">
            
                    
                    Week 9 - AJAX, Async, Promises
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../">
            
                <a href="../">
            
                    
                    JavaScript III
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.7.1" data-path="lesson.html">
            
                <a href="lesson.html">
            
                    
                    Week 10 - Good Code, TDD
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../week-11/lesson.html">
            
                <a href="../week-11/lesson.html">
            
                    
                    Week 11 - More TDD, ES6
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../week-12/lesson.html">
            
                <a href="../week-12/lesson.html">
            
                    
                    Week 12 - Exam maybe
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../node-db/">
            
                <a href="../../node-db/">
            
                    
                    Node/DB I
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../../node-db/week-13/lesson.html">
            
                <a href="../../node-db/week-13/lesson.html">
            
                    
                    Week 13 - Node and Express 101
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../../node-db/week-14/lesson.html">
            
                <a href="../../node-db/week-14/lesson.html">
            
                    
                    Week 14 - Templating and APIs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../../node-db/week-15/lesson.html">
            
                <a href="../../node-db/week-15/lesson.html">
            
                    
                    Week 15 - Node and Mongo maybe
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../../node-db-2/">
            
                <a href="../../node-db-2/">
            
                    
                    Node/DB II
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../../node-db-2/week-16/lesson.html">
            
                <a href="../../node-db-2/week-16/lesson.html">
            
                    
                    Week 16 - MongoDB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../../node-db-2/week-17/lesson.html">
            
                <a href="../../node-db-2/week-17/lesson.html">
            
                    
                    Week 17 - Mongoose
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../../node-db-2/week-18/lesson.html">
            
                <a href="../../node-db-2/week-18/lesson.html">
            
                    
                    Week 18 - Node/DB Recap
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../../react/">
            
                <a href="../../react/">
            
                    
                    React
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../../react/week-19/lesson.html">
            
                <a href="../../react/week-19/lesson.html">
            
                    
                    Week 19 - React 101
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../../react/week-20/lesson.html">
            
                <a href="../../react/week-20/lesson.html">
            
                    
                    Week 20 - State
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../../react/week-21/lesson.html">
            
                <a href="../../react/week-21/lesson.html">
            
                    
                    Week 21 - React-router & Recap
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../../others/">
            
                <a href="../../others/">
            
                    
                    Others
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../../others/aws-workshop-2.html">
            
                <a href="../../others/aws-workshop-2.html">
            
                    
                    AWS - DynamoDB
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../../others/coding-101.html">
            
                <a href="../../others/coding-101.html">
            
                    
                    Coding 101
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../../house-rules.html">
            
                <a href="../../house-rules.html">
            
                    
                    House Rules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../../PRACTICES.html">
            
                <a href="../../PRACTICES.html">
            
                    
                    Coding Standards and Best Practices
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../../CONTRIBUTING.html">
            
                <a href="../../CONTRIBUTING.html">
            
                    
                    Contributing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="../../lesson-template.html">
            
                <a href="../../lesson-template.html">
            
                    
                    Lesson Template
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Week 10 - Good Code, TDD</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <p><img src="https://img.shields.io/badge/status-draft-darkred.svg" alt=""></p>
<p><strong>What will we learn today?</strong></p>
<ul>
<li><a href="#functions">Functions and Good Design</a></li>
<li><a href="#tdd">TDD</a></li>
</ul>
<hr>
<h2 id="functions">Functions</h2>
<h2 id="why-functions">Why Functions?</h2>
<p>The function is considered one of the greatest inventions in computer science.
It makes programs easier to read and to understand. It allows for us to more
easily modify and extend code. It saves space and improves performance.</p>
<p>At the most basic level, a function is a series of instructions that can take an
input and produce an output. Parameters dictate how the function behaves.</p>
<p><img src="https://arthurleon.files.wordpress.com/2014/09/function_machine.png?w=240" alt="Function Diagram" title="Function Diagram">
<img src="https://i2.kknews.cc/large/19f00001508ee348ee0c" alt="Function &amp; Parameters Diagram" title="Function &amp; Parameters Diagram"></p>
<p>We&apos;ve used functions a bit, but now we need to know how to use them well.</p>
<p>There are many ways to write code that does the same thing. But are they all
equal?</p>
<blockquote>
<p>Exercise: Let&apos;s look at a really obvious example of a function with redundant
code. What could we do to improve it?</p>
</blockquote>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">printHelloFiveTimes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Introducing a simple for loop makes our lives a lot easier. This way we can more
easily see what the function does and make modifications.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">printHelloFiveTimes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>Exercise: Now, let&apos;s look at a different example. Let&apos;s say we wanted to
welcome mentors:</p>
</blockquote>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">welcomeMentors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Mozafar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Rares&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Tim&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Ashleigh&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Gordon&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>We could be lazy and change how we welcome the mentors.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">welcomeMentors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> mentorNames <span class="token operator">=</span> <span class="token string">&quot;Mozafar, Rares, Tim, Ashleigh, Gordon&quot;</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello &quot;</span> <span class="token operator">+</span> mentorNames<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>But it&apos;s not quite the output we wanted. And we can be smarter about it. Why not
a loop?</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">welcomeMentors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> mentorNames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Mozafar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Rares&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Tim&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Ashleigh&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Gordon&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> mentorNames<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello &quot;</span> <span class="token operator">+</span> mentorNames<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>So functions help us to organise and enhance our code. But what makes good
design? Is it just &quot;shorter is always better&quot;?</p>
<h2 id="good-design">Good Design</h2>
<p>Design is important if we want our code to be understandable (both to other
humans, but also to us in the future), to be easy to use and easy to expand.</p>
<p>There are three main principles you need to know now: clarity, reusability and
extensibility. There are also others, but they are deeply related to these
three.</p>
<p>To</p>
<ul>
<li><p>Ease of Maintenance / Clarity</p>
<ul>
<li>Naming</li>
<li>Formatting</li>
<li>Commenting</li>
<li>Clear logic</li>
<li>Concise</li>
<li>Avoiding Redundancy</li>
</ul>
</li>
<li><p>Reusability</p>
<ul>
<li>DRY</li>
<li>Single Reponsibility<ul>
<li>Avoiding global state (scope)</li>
<li>Predictability and Ease of testing</li>
</ul>
</li>
</ul>
</li>
<li><p>Extensibility</p>
<ul>
<li>Avoiding being unnecessarily specific (e.g. magic numbers)</li>
</ul>
</li>
</ul>
<blockquote>
<p>Exercise: Find all the design issues with this function.</p>
</blockquote>
<p>As an aside: if you try to run the code it won&apos;t work, but not because it&apos;s not
correct. It&apos;s only because it is a fragment of a larger program and lacks some
code such as the function updateCorpDatabase(), the initialisation of the global
variables referenced (e.g. quarter, profit) and, of course, the HandlesStuff()
function also hasn&apos;t been called.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">HandlesStuff</span><span class="token punctuation">(</span>
  inputRecord<span class="token punctuation">,</span>
  savedrecord<span class="token punctuation">,</span>
  income1<span class="token punctuation">,</span>
  income2<span class="token punctuation">,</span>
  expenseType<span class="token punctuation">,</span>
  revenue<span class="token punctuation">,</span>
  expense0<span class="token punctuation">,</span>
  expense1<span class="token punctuation">,</span>
  expense2<span class="token punctuation">,</span>
  screenx<span class="token punctuation">,</span>
  screeny<span class="token punctuation">,</span>
  success
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> i<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    inputRecord<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">updateCorpDatabase</span><span class="token punctuation">(</span>savedrecord<span class="token punctuation">)</span><span class="token punctuation">;</span>
  income1 <span class="token operator">=</span> income2 <span class="token operator">*</span> <span class="token number">4.0</span> <span class="token operator">/</span> quarter<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>expenseType <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    profit <span class="token operator">=</span> revenue <span class="token operator">-</span> expense0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>expenseType <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    profit <span class="token operator">=</span> revenue <span class="token operator">-</span> expense1<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>expenseType <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    profit <span class="token operator">=</span> revenue <span class="token operator">-</span> expense2<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>What is wrong with this function?</p>
<ol>
<li><p>Naming: the function has a bad name, HandleStuff() tells you nothing about
what the function does. It&apos;s also considered bad practice to name variables
vaguely by separating them through numbers (debt1, expense1, etc). If you
find yourself doing this then you should either use an array (such as
expenses[]) or use a more specific name for each variable (such as pastIncome
and currentIncome). There is also inconsistency in the use of camel casing
(inputRecord versus savedrecord).</p>
</li>
<li><p>Commenting: the function isn&apos;t documented at all. It&apos;s very difficult to
understand what the function&apos;s purpose is and how each part of the code
contributes to it. By writing comments, the coder communicates their
reasoning and helps the function be human readable.</p>
</li>
<li><p>Layout/ Formatting: the physical organisation of the code on the page gives
few hints about its logical organisation. Layout strategies are used
inconsistently throughout the code: incorrect indentation, unnecessary
spacing (between the two else ifs) and the long list of parameters is
unreadable. This makes the code look messy and confusing.</p>
</li>
<li><p>Input variables: the function&apos;s input variable, inputRecord, is set
(hardcoded) within the function. If it&apos;s an input variable, its value should
not be modified. If the value of the variable is supposed to be modified,
then the variable should not be called inputRecord.</p>
</li>
<li><p>Global variables: the function reads and writes global variables - it reads
from quarter and writes to profit. It should communicate with other functions
more directly, rather than by reading and writing global variables.</p>
</li>
<li><p>Single Responsibility: the function does not have a single purpose. It
initialises some variables, writes to a database, does some calculations -
none of which seem to be related to each other in any way. A function should
have a single, clearly defined purpose. This function looks like it needs
restructuring: breaking it into multiple functions.</p>
</li>
<li><p>Data checks: the function doesn&apos;t defend itself against bad data. If quarter
equals 0, the expression income2 * 4.0 / quarter causes a divide-by-zero
error.</p>
</li>
<li><p>Magic numbers: the function uses several magic numbers: 100, 4.0, 1, 2 and 3.
These are numbers that are used directly in an expression rather than saving
them first in a variable. This is discouraged as it makes it more difficult
to manipulate the values. If we were to save them in a variable they would be
easier to find and modify.</p>
</li>
</ol>
<pre class="language-"><code class="lang-js">tenSquared <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">;</span>
tenCubed <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">;</span>

x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
xSquared <span class="token operator">=</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
xCubed <span class="token operator">=</span> x <span class="token operator">*</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
</code></pre>
<ol>
<li><p>Useless parameters: some of the function&apos;s parameters are never used
(screenx, screeny and success). They should be removed because they are
confusing. It is tempting when you&apos;re starting to code a function to add more
parameters thinking that you might need them, but it&apos;s important to remove
them if you don&apos;t end up using them.</p>
</li>
<li><p>DRY principle: the function breaks the DRY (Don&apos;t Repeat Yourself) rule. The
expression profit = revenue - expense0 is written 3 times unnecessarily, the
only difference being whether it&apos;s the first, second or third expense. This
variable can be restructured into an array.</p>
</li>
</ol>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> expense <span class="token operator">=</span> <span class="token punctuation">[</span>expense1<span class="token punctuation">,</span> expense2<span class="token punctuation">,</span> expense3<span class="token punctuation">]</span><span class="token punctuation">;</span>
profit <span class="token operator">=</span> revenue <span class="token operator">-</span> expense<span class="token punctuation">[</span>expenseType<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p>Exercise: We have the following problem to solve, write really bad code that
gives the right result. Tell us why it is bad.</p>
</blockquote>
<p>Write a function that will print out the number of vowels that are in mentors&apos;
names.</p>
<blockquote>
<p>Exercise: Now, let&apos;s write it well together.</p>
</blockquote>
<h2 id="resources">Resources</h2>
<ol>
<li><a href="http://bdcampbell.net/javascript/book/javascript_the_good_parts.pdf" target="_blank">JavaScript: The Good Parts by Douglas Crockford, chapter 4 - Functions</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Basics" target="_blank">MDN Objects basics</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Object-oriented_JS" target="_blank">MDN OOP in JS</a></li>
</ol>
<h1 id="tdd">TDD</h1>
<p><strong> What we will learn today?</strong></p>
<ul>
<li>Unit Testing</li>
<li>The <em>Jest</em> testing framework<ul>
<li>The <code>test()</code> function</li>
<li><code>expect()</code> and <code>toBe()</code></li>
<li><code>npm test</code></li>
<li>Test coverage</li>
</ul>
</li>
<li>Test-driven development (TDD)<ul>
<li>Red, green, refactoring</li>
</ul>
</li>
</ul>
<hr>
<h1 id="before-we-get-started">Before we get started</h1>
<blockquote>
<p><strong>Fork</strong> &gt;
<a href="https://github.com/CodeYourFuture/js-core-3-exercises" target="_blank">this repository</a> to
your own Github account, then <strong>clone</strong> it to your computer.\
Today&apos;s exercises will be based on this repository.</p>
</blockquote>
<h1 id="unit-testing">Unit Testing</h1>
<p>Testing is a key skill for any software programmer. We need to make sure our
software is thoroughly tested, otherwise bad things happen. Testing makes sure
our programs behave like we intend them to do - <strong>if we don&apos;t test, we can cause
severe bugs</strong>. Bad software can make planes crash, companies bankrupt, and users
of your software really frustrated.</p>
<p>There are different levels on which we can test software, for example
integration testing, end-to-end testing, and unit testing. Today we will deal
with unit testing, which is probably the most universal testing discipline.</p>
<p>A unit test is exactly that - it tests a <em>unit</em> of code. &quot;Unit&quot; can mean
different things, but in JavaScript it usually refers to a single function.</p>
<p>Remember when we talked about functions? Functions take <em>input</em> (as arguments),
do something with it (in the function body), and return <em>output</em> (using the
<code>return</code> statement). Ideally, a function should always return the same output if
the same input is given. It makes it predictable and testable - and that&apos;s what
we want!</p>
<pre class="language-"><code>         |-----------------|
input =&gt; | doing something | =&gt; output
         |-----------------|
</code></pre><p>So, when unit testing a function, we want to make sure that <em>for a certain
input, we get the expected output</em>. For this we need to make sure that the
output matches our expectations. In the simplest form that means we do an
equality check:</p>
<pre class="language-"><code class="lang-js"><span class="token function">myFunction</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span> <span class="token operator">===</span> expectedOutput<span class="token punctuation">;</span>
</code></pre>
<p>We can formalise this using another function that compares two values and
complains when they do not match. Such a function is prepared in
<code>unit-testing/equals.js</code>.</p>
<p>We can use this function to simply compare to values:</p>
<pre class="language-"><code class="lang-js"><span class="token function">equals</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// This should pass</span>
<span class="token function">equals</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// This should fail</span>
<span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// This should pass</span>
</code></pre>
<p>Now we can use this <code>equals()</code> function to test our own code by comparing a
function result to an expected value.</p>
<blockquote>
<p><em>Together:</em> Follow the instructions in <code>unit-testing/sum.js</code>!</p>
<p><em>Exercise:</em> Now you! Take the provided <code>unit-testing/findNeedle.js</code> and turn
it into a function that returns a result instead of printing it. Then run it
using multiple inputs and make sure it returns the correct results each time!</p>
</blockquote>
<h2 id="test-driven-development-tdd">Test-driven development (TDD)</h2>
<blockquote>
<p>Test-driven development (TDD) is a software development process that relies on
the repetition of a very short development cycle: requirements are turned into
very specific test cases, then the software is improved to pass the new tests,
only. (<a href="https://en.wikipedia.org/wiki/Test-driven_development" target="_blank">Wikipedia</a>)</p>
</blockquote>
<p>A key principle in TDD is that we write think about our requirements before we
dive into code: What should our program be able to do? What are our edge cases?</p>
<p>We formalise those requirements by writing tests - <em>even before our program is
written</em>! At this time, all our tests will fail, because we haven&apos;t written any
code yet. Our tests are now <strong>RED</strong> (the colour represents a failing test).</p>
<p>Now we want to turn this <strong>RED</strong> into <strong>GREEN</strong>. We do this by implementing our
function in a way that covers all our test cases.</p>
<blockquote>
<p><em>Exercise:</em> Follow the instructions in <code>tdd/findNeedle.js</code>!</p>
</blockquote>
<h2 id="refactoring">Refactoring</h2>
<p>There are times when we want to make our code better without changing any
functionality, for example because we just learnt about a better way to solve a
certain problem (like, finding needles in haystacks). This is called
<em>refactoring</em>.</p>
<p>When previously <strong>GREEN</strong> code - working code! - suddenly does not work anymore,
we call this a <em>regression</em>. Our existing tests can make sure that when we
refactor, the functionality of our code actually stays the same, and does not
regress.</p>
<blockquote>
<p><em>Together:</em> Refactor the <code>findNeedle</code> function we just wrote to be implemented
using <code>.map()</code> and <code>.filter()</code>.</p>
</blockquote>
<h2 id="unit-testing-frameworks">Unit testing frameworks</h2>
<p>There are lots of other things you might want to test for than two things being
equal. You might want to test if a number is smaller or greater than another, if
a function was called, if an error happened, or if one thing happened before
another thing, or how long a function call took to execute.</p>
<p>We don&apos;t have to build all these things ourselves. Instead there are <em>unit
testing frameworks</em> that take all that work off our shoulders. All we need to do
is provide the code and the tests.</p>
<h3 id="jest">Jest</h3>
<p>The unit testing framework we are trying to day is called
<a href="https://facebook.github.io/jest/" target="_blank">Jest</a>. It&apos;s created by Facebook and useful
for all kinds of unit testing (especially testing React, which we will do in a
later lesson).</p>
<p>Look into your <code>jest/</code> folder. You will find a file there, <code>sum.test.js</code>. The
suffix <code>.test.js</code> tells Jest that this file contains tests it should execute. To
execute the test, run the following command in your terminal:</p>
<pre class="language-"><code class="lang-sh"><span class="token function">npm</span> <span class="token function">test</span>
</code></pre>
<p>This command runs the test in <code>sum.test.js</code>, which tests the <code>sum()</code> function.
You can see the test output and the fact that the test passed.</p>
<p>Tests cases in Jest have the following structure:</p>
<pre class="language-"><code class="lang-js"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;test description&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// Test instructions</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Jest provides a set of functions that you can use to write your actual tests.
They are created in a way that imitates natural language, for example:</p>
<pre class="language-"><code>_Expect_ sum of 1 and 2 _to be_ 3
</code></pre><p>becomes</p>
<pre class="language-"><code class="lang-js"><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>You can add multiple test statements in the same test case (a test case is one
call of the <code>test</code> function, but you can also create multiple test cases in one
file. It is important that you give all your test cases meaningful descriptions.</p>
<blockquote>
<p><em>Exercise:</em> Add another test case to <code>sum.test.js</code>. Is the sum of 10 and -10
really zero? Run the tests using Jest.</p>
<p><em>Exercise:</em> Take the <code>findNeedle</code> function you have tested previously, copy it
into the <code>jest/</code> folder and call it <code>findNeedle.test.js</code>. Then write a test to
be used with Jest, similar to <code>sum.test.js</code>. Make sure you cover multiple
inputs and give all tests meaningful descriptions! Run the tests using Jest.</p>
</blockquote>
<h3 id="test-coverage">Test coverage</h3>
<p>Test coverage describes the extent to which a code base is tested. When Jest
runs your tests, it generates a so-called <em>coverage report</em>. This report tells
you how many of your <em>lines of code</em> are covered by tests, how many functions,
statements, and branches.</p>
<blockquote>
<p>A branch is one of multiple ways a code control flow can go. For example, if
you have an <code>if() ... else ...</code>, both the &quot;if&quot; and the &quot;else&quot; branch must be
covered by tests.</p>
</blockquote>
<p>We want to keep our code coverage as high as possible. Jest allows us to
generate a coverage report when we run the following command in the terminal:</p>
<pre class="language-"><code class="lang-sh"><span class="token function">npm</span> <span class="token function">test</span> -- --coverage
</code></pre>
<blockquote>
<p><em>Exercise:</em> Check your code coverage for the tests you wrote. Is any of the
numbers below 100%? If so, try and bring it up to 100%!</p>
</blockquote>
<h1 id="resources">Resources</h1>
<ol>
<li><a href="https://en.wikipedia.org/wiki/Test-driven_development" target="_blank">Test-driven development</a></li>
<li><a href="https://facebook.github.io/jest/" target="_blank">Jest</a></li>
<li><a href="https://nodejs.org/api/modules.html" target="_blank">Modules</a></li>
</ol>
<h1 id="homework">Homework</h1>
<ol>
<li>Read the Wikipedia article about
<a href="https://en.wikipedia.org/wiki/Test-driven_development" target="_blank">Test-driven development</a></li>
<li>Solve the exercises in this repo (using TDD)
<a href="https://github.com/CodeYourFuture/js-tdd-exercises" target="_blank">https://github.com/CodeYourFuture/js-tdd-exercises</a></li>
</ol>
<p><strong>TODO</strong></p>
<h2 id="research">Research</h2>
<ul>
<li>Research other module formats than CommonJS. What is AMD? What are ES6 modules
and how do their differ from CommonJS?</li>
<li>What are other test frameworks for JavaScript?</li>
<li>More parts of the Jest (Jasmine) DSL than just <code>.toBe()</code></li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../" class="navigation navigation-prev " aria-label="Previous page: JavaScript III">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../week-11/lesson.html" class="navigation navigation-next " aria-label="Next page: Week 11 - More TDD, ES6">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Week 10 - Good Code, TDD","level":"1.7.1","depth":2,"next":{"title":"Week 11 - More TDD, ES6","level":"1.7.2","depth":2,"path":"js-core-3/week-11/lesson.md","ref":"js-core-3/week-11/lesson.md","articles":[]},"previous":{"title":"JavaScript III","level":"1.7","depth":1,"path":"js-core-3/index.md","ref":"js-core-3/index.md","articles":[{"title":"Week 10 - Good Code, TDD","level":"1.7.1","depth":2,"path":"js-core-3/week-10/lesson.md","ref":"js-core-3/week-10/lesson.md","articles":[]},{"title":"Week 11 - More TDD, ES6","level":"1.7.2","depth":2,"path":"js-core-3/week-11/lesson.md","ref":"js-core-3/week-11/lesson.md","articles":[]},{"title":"Week 12 - Exam maybe","level":"1.7.3","depth":2,"path":"js-core-3/week-12/lesson.md","ref":"js-core-3/week-12/lesson.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["prism","-highlight"],"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-tomorrow.css"]},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"js-core-3/week-10/lesson.md","mtime":"2017-12-01T20:10:06.204Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-12-01T20:11:28.264Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

